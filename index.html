<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D3 Bar Chart</title>
    <div id="main">
        <h1 id="title">United States GDP</h1>
    </div>
    <style>
        rect {
            width: 3px;
            fill: aqua;
            display: inline-block;
        };
    </style>
</head>
<body>
    <script type="module">
        import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";
        import {GDP} from "./data.js";
        const find = GDP.data;
        
        let dates = find.map((e)=> {return new Date(e[0])});

        const w = 800;
        const h = 600;
        const padding = 40;

        console.log(dates);
        const xScale = d3.scaleTime().domain([d3.min(dates), d3.max(dates)]).range([padding, w - padding]);
        const yScale = d3.scaleLinear().domain([0, d3.max(find, (e) => {return e[1]})]).range([h - padding, padding]);

        const svg = d3.select("div").append("svg").attr("width", w).attr("height", h);
        svg.selectAll("rect").data(find).enter().append("rect").attr("x", (d, i) => 50 + i* 3.2 + "px").attr("y", (d) => h - yScale(d[1])).style("height", (d) => yScale(d[1]) + "px").attr("class", "bar");

        const xAxis = d3.axisBottom(xScale);
        const yAxis = d3.axisLeft(yScale);

        svg.append("g").attr("transform", "translate(60," + (h - padding * 2) + ")").call(xAxis).attr("id", "x-axis");
        svg.append("g").attr("transform", "translate(" + (padding * 5) + ", 0)").attr("class", "tick").call(yAxis).attr("id", "y-axis");
    </script>
</body>
</html>